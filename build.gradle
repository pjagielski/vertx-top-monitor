apply plugin: 'groovy'
apply plugin: 'idea'

sourceCompatibility = 1.7

def buildDir = 'build'
def libDir = "${buildDir}/libs"
def mainVerticle = "com.jagielu.vertx.WebApp"

repositories {
	mavenCentral()
}

dependencies {
    groovy group: 'org.codehaus.groovy', name: 'groovy', version: '2.0.6'
    compile group: 'org.vert-x', name: 'vertx-platform', version: '1.3.1.final'
    compile group: 'org.vert-x', name: 'vertx-lang-java', version: '1.3.1.final'
    testCompile group: 'junit', name: 'junit', version: '4.+'
}

task runVertx(type:Exec, dependsOn: 'build') {
    executable 'vertx'
    args = ['run', "$mainVerticle", '-cp', "$libDir/vertx-top-monitor.jar"]
}